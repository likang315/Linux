### 系统检测命令

------

[TOC]

##### 01：ps（process status）

- 作用：查看**系统进程**信息，如：PID值 
- 格式：ps -参数 
- 参数
  - -A、-e：作用一样，显示所有进程
  - -f：通过PPID、PID 显示进程之间关系；
  - ps -ef | grep 进程名：查ps看指定进程以及运行的环境
    - ps -ef | grep java
- 结果列信息
  - USER：进程的用户名
  - PID：进程的 ID 号
  - %CPU：进程占用 CPU 的使用率
  - %MEM：进程占用内存的使用率
  - VSZ：进程使用的虚拟内存大小（单位为 KB）
  - RSS：进程占用的物理内存大小（单位为 KB）
  - TTY：进程所在的终端
  - STAT：进程的状态，如 S（休眠）、R（运行）、Z（僵尸进程）等
  - START：进程启动时间
  - TIME：进程占用 CPU 的累计时间
  - **COMMAND**：进程所对应的命令
  

##### 02：top

- 作用：动态的**监视进程的状态及负载信息**，任务管理器
- 格式
  - 第一行：load average ：5 10 15 min 
  - 系统平均负载 第二行：进程总数，运行数，休眠数，停止数，僵死数 
  - 第三行：CPU的利用率 
  - 第四行：内存总量，剩余量，已使用量，已缓存量
  - 第五行：swap空间信息
  - 退出浏览：点击q键
- top -d 指定刷新时间
- top -p 123：查看pid为123的进程cpu使用
- top -c：显示该进程启动的命令行参数
- top -Hp：**查看进程下的线程信息**

##### 03：uptime

- 作用：显示系统运行时间及平均负载（1\5\15分钟），简化版的top
- 格式：uptime 
- 注意：负载值越低越好，长期不要超过1，在生产环境下不要超过 5

##### 04：pidof

- 作用：根据服务名查看进程信息。如：PID值
- 格式：pidof 服务名 
- 例如：pidof sshd 查看远程登录服务

##### 05：killl

- 作用：强行结束进程
- 格式
  - kill 进程PID 
  - 默认情况下，发送的 TERM 信号，告诉进程优雅的退出；
- 参数
  - -9：强制退出，不给进行资源清理的时间；
  - kill -l：查看 kill 所有发送信号的参数；

##### 06：ifconfig

- 作用：查看**网卡**相关信息
- 格式：ifconfig
- 信息解释
  - ether：本机网卡 mac 地址
  - inet：本机IP地址
  - netmask：子网掩码
  - broadcast：广播地址
  - RX：发送数据包个数 
  - TX：收到数据包个数

##### 07：ip

- 作用：网络配置工具，可以用来查看和设置网络接口、路由表、策略路由、ARP 缓存和多播组等
- 格式：ip 选项 cmd [参数]
- 示例
  - ip addr show：显示网卡信息；
  - ip route show：查看路由表；
    - via（virtual interface address）：在网络路由中用于指示**下一跳路由器的IP地址；**
    - 10.17.0.0/16 via 10.234.128.1 dev en4
      - **目标：**10.17.0.0/16，表示目标网络为 10.17.0.0，子网掩码为 /16，即 255.255.0.0。
      - **网关：**10.234.128.1，指明要发送到目标网络的数据包需要经过 10.234.128.1 这个路由器或者网关。
      - **出口：**en4，表明数据包将通过 en4 网络接口发送出去。

##### 08：uname

- 作用：查看本机系统安装信息，如版本号，运行平台等
- 格式：uname -参数
- 参数
  - uname -a：显示系统所有信息；


##### 09：free

- 作用：查看**内存(交换内存)**的使用情况
- 格式：free
- 参数
  - -h : 自动转化可读单位；
  - -s：持续观察内存情况，指定执行命令间隔，单位s;
    - free -h -s 3
- 展示
  - Mem：内存的使用情况；
  - Swap：交换空间的使用情况；
    - swap space ：用于临时存储内存中暂时不需要的数据的一部分磁盘空间（换出和换入）；
  - **total**：显示系统**总的可用物理内存和交换空间大小**。
  - **used**：显示已经被使用的物理内存和交换空间。
  - **free**：显示还有多少物理内存和交换空间可用。
  - shared：显示被共享使用的物理内存大小。
  - **buff/cache**：显示被 buffer 和 cache 使用的物理内存大小。
  - available：表示还可以被应用程序使用的物理内存大小，当没有足够的free内存时，内核就会从 buffer 和 cache 中回收内存来满足应用程序的请求；

##### 10：who

- 作用：查看当前登入主机后的终端信息
- 格式：who
- 显示账户名，终端名（0为图形化界面），时间信息

##### 11：last 

- 作用：显示系统登录记录
- 格式：last

##### 12：history

- 作用：查看历史命令 
- 格式：history -参数
- 修改默认记录历史命令个数 
  - 位置：cd /etc 
  - 文件： vim /etc/profile
  - 参数值：HISTSIZE=1000，可将右侧数字自行修改
  - 注意：修改后建议重启（reboot）
- 历史命令记录位置： /root/.bash_history
- 清空历史命令记录：history -c

