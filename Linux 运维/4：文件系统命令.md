### 文件系统命令

------

​	在Linux系统中，用户是按组分类的，一个用户属于一个或多个组

##### 1：文件系统层次化标准（FHS）

- Linux文件系统一切从根（/）开始
-  拓扑结构：倒置的树型
- 目录的名称默认小写，且区分大小写，如：root，POOT，Root，rOOt是不同目录
- 常用目录意义 /：根目录
  1. /boot：系统启动文件存储目录
  2. /root：root账户的家目录 == ~ 
  3. /home/普通账户名：普通user家目录
  4. /dev：设备文件目录
  5. /etc(etcetera)：配置文件目录
  6. /var：日志文件目录
  7. /media：设备挂载常用目录
  8. /bin(binary)：二进制可执行文件目录
  9. /tmp：临时文件或共享文件目录
  10. /usr：应用程序存放目录
- 注意：FHS不是一种强制性约束规范，但却是一种默认的行业标准，应该按照目录功能分类存储文件

##### 2：文件增删改命令

###### 1：mkdir

- 新建目录
- 格式：mkdir -参数 绝对路径/目录名
- 参数：-p 用于建立多级递归目录
- 例如：
  - mkdir temp1
  - mkdir temp2 temp3 temp4
  - mkdir -p t1/t2/t3/t4（递归目录）

###### 2：touch【重点】

- 作用：新建空白文件，可以设置文件相关时间
- 格式：touch -参数 文件名
- 参数:
  - -a：设置文件atime访问时间 
  - -m：设置文件的mtime修改时间
  - -d ： 同时设置上述 2个 时间
- 例： 
  - touch tmp.txt
  - touch /root/tmp1.txt 
  - touch a1 a2 a3 
  - touch -d "yyyy-mm-dd hh：mm：ss"  文件名

###### 3：rm（remove）

- 作用：删除目录及文件
- 格式：rm -参数 目录名或文件名
- 参数：
  - -r：递归删除
  - -f：不确认，直接删除
  - -rf：删除目录，不确认，强制删除
- 注意：生产环境中禁用-f参数，以避免误删除文件及目录

###### 4：cp（copy）

- 作用：拷贝复制文件或目录
- 格式：cp 参数 源 目标
- 参数：
  - -p ：保留原始文件的属性
  - -d ：若对象为”链接文件“，则保留该”链接文件“的属性
  - -r ：递归持续复制（复制目录时使用）
  - -i ：若目标文件存在则询问是否覆盖
  - -a ：相当于-pdr
- 注意：
  - 目标为目录则正常复制
  - 目标为文件则询问是否覆盖
  - 目标为文件且不存在则正常复制

###### 5：mv（move）

- 作用：将文件或目录的名称进行改名或将文件移动到另一个目录中（剪切）
- 格式：mv 参数 源 目标
- 注意：
  - 源为文件，目标为目录，则为移动剪切
    - mv t1.txt /root
  - 源为文件，目标为文件，则为改名
    - mv t1.txt t1.md
  - 源为目录，目标为目录，则为改名
    - mv t1 t2

###### 6：dd

- 作用：制作指定容量的文件
- 格式：
  - dd if=来源 of=文件名 bs=容量 count=块个数
- 制作空文件（内容为全零）
  - dd if=/dev/zero of=kong.txt bs=100M count=2
    - /dev/zero :是一个输出全零数据的设备文件，容器本身不占用空间，用于对新文件进行数据填充
    - bs= ：表示新文件容量，以 K M G T作为单位
    - count= :制作文件由几个数据块组成
  - 利用光驱制作Linux 系统镜像文件： dd: if=dev/cdrom of=CentOS7_x86_64.iso

##### 3：文件查看操作命令

###### 1：file

- 作用：显示文件类型
- 格式：file 文件名
- 文件类型
  - empty ：空文件（未知类型）
  - ASCII test ：ASCII码文本文件
  - character special :字节设备文件
  - block special ：块设备文件
  - link :链接文件（快捷方式）

###### 2：cat【重点】

- 作用：显示文本内容或者拼接纯文本文件
- 格式：cat -参数 文件名
- 例如：cat /etc/passwd
- 参数：
  - -b：文件中所有非空行增加行号，从1开始编号
  - -n ：文件中所有行增加行号（包括空行）
- 合并文件：
  - touch a1.txt a2.txt a3.txt
  - echo “china” > a1.txt
  - echo “123456” > a2.txt
  - cat a1.txt a2.txt > a3.txt

###### 3：tac

- 作用：倒叙查看文本内容，由最后一行到第一行反向显示出来
- 格式：tac 文件名

###### 4：head

- 作用：查看指定行数的文本首部内容
- 格式：head -n 数字 文件名
- 例如：head -n 10 /etc/passwd  ：查看前10行

###### 5：tail【重点】

- 作用：查看文本文件后n行内容
- 格式：tail -参数 文件名
- 例：
  - **tail -f /var/log/messags   ：查看日志文件，且可以动态刷新（-f）**
  - tail -n 100 文件名 ：查看文件最后一百行内容

###### 6：more【重点】

- 作用：查看内容较多的文本文件内容
- 格式：more -参数 文件名
- 参数
  - -数字 ： 如-10，表示一屏显示10行，包括空行
- 注意：more 一般与管道符配合使用
- 例如：查看内容较多的目录：ls -a | more
- 退出查看：点击q键

###### 7：less

- 作用：分页显示文件内容
- 格式：less 文件名
- 注意：使用空格或k向下翻页，使用j键向上翻页

###### 8：stat【重点】

- 作用：查看文件属性，如：容量、类型、时间等信息
- 格式：stat 文件名
- 时间信息
  - Access ：访问时间，等同于atime
  - Modify ： 修改时间，等同于mtime
  - Change：状态改动时间，等同于ctime

##### 4：操作文件命令

###### 1：wc（Word Count ）

- 作用：统计文件的容量、行数、字节数信息
- 格式：wc -参数 文件名
- 参数:
  - -l ： 只显示行数
  - -w ：只显示单词数
  - -c ： 只显示字节数
- 注意：wc命令一般与管道符配合使用，例如：查看目录的信息：ls -a  | wc

###### 2：tar

- 文件的解压或压缩
- tar -参数 目录
- 参数：
  - -c ：压缩
  - -x ：解压
  - -z ：是否使用gzip压缩
  - -v ：压缩过程显示文件
  - -f ：使用档名
- 解压常用：-zxvf
- 压缩常用：-zcvf

###### 3：chmod【重点】

- 作用：修改文件或目录的权限
- 格式：chmod 参数 权限范围 符号 权限代号 文件或目录
- -R : 进行递归(recursion)的持续变更，即连同次目录下的所有文件都会变更
- 权限范围表示法
  - u：User，文件或目录的拥有者
  - g：Group，文件或目录的所属群组
  - o：Other，其他用户
  - a：ALL，全部用户
- d:符号
  - +：增加权限
  - -：取消权限
  - = ：设定权限
- 权限代号
  - r：读取权限,数字代号：4 
  - w：写入权限,数字代号：2 
  - x：执行或切换权限,数字代号：1 
  - -：不具有任何权限，数字代号：0
    - rwx=4+2+1=7
- 例：
  - 符号法：chmod -R u=rwx,g=rx,o=r dest_file 
  - **数字法：chomd 777 dest_filess**
  - chmod u+w dest_file   ：给目标文件的User增加 w 权限

###### 文件属性格式：

- 例：drw-r--r-- 1 root root 27974 Oct 27 2009 install.log
- 第1位：类型 d :目录，-:普通文件，|:链接文件
- 第2-4位：所属用户权限，5-7位：所属组权限，8-10位：其他用户权限
- 第一个参数：owner 第二个参数：group

###### 4：find

- 作用：按照指定条件查找文件，不能用与查找文件内容

- 格式：find 查找路径 查找条件 操作

- 查找条件：

  - -name ： 按照名称查找
  - -user ： 按照所有者查找
  - -group ： 按照所属组查找
  - -type b/d/c/p/l/f ：按照文件类型（块设备、目录、字符设备、管道、链接文件、文本文件）
  - -size ：按照文件大小查找（+：大于 、-：小于）
  - 通配符
    - *： 任意内容、任意个数
    - ？:  任意内容、1个

- 例：

  - 查找/目录下以host开头的文件：find / -name "host*"

  - 查找所有的日志文件：find /var -name " *.log"

  - 查找网卡文件并显示详细信息： find /etc -name “ifcfg-ens33” -ls

  - 查找/etc中大于1000k的文件：find /etc -size +1000k 

  - 区间查找：find / -size +10M -size -1G 

  - **查找以a开头且为4位名称的文件并统计大小：find / -name "a???" | wc**

  - 查找5天以内的修改过的文件： find / -mtime -5

###### 5：which

- 作用：显示PATH环境变量中的执行命令路径
- 格式：which 命令 
- 例如：which cat

###### 6：管道符

- 作用：将命令1内容的输出作为命令2 的输入
- 格式：命令1 | 命令2 
- 常与 grep 联用

###### 7：全局表达式

- 作用：用于过滤或者搜索特定的字符
- 格式：grep 参数 pattern 文件名
- 例：
  - 从文件内容查找匹配指定字符串的行： grep "字符串" 文件名 
  - 从文件内容查找与正则表达式匹配的行：grep –e “正则表达式” 文件名
  - 查找时不区分大小写： grep –i "字符串" 文件名
  - 查找匹配的行数：grep -c “被查找的字符串” 文件名
  - grep -o "String"  filename | wc -l
    - 统计文件中出现String的次数

###### 8：下载、上传文件

- sz：(send Zmodem)：用Zmodem文件传输协议从Linux服务器发送文件到本地上
  - sz -b filename : 以二进制的形式down文件
  - -a 以文本方式传输（ascii）
  - -b 以二进制方式传输（binary）
  - SecureCRT 设置默认路径：
    - Options -> Session Options -> Terminal -> Xmodem/Zmodem ->Directories
- rz：(receive Zmodem)：在Linux上接收文件；